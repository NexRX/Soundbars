import{$ as A,b as oe,g as X,d as we,e as $e,c as b,i as _,E as ke,f as Oe,S as G,h as Se,s as M,t as N,j as Pe}from"./index-sGUorxdN.js";import{c as _e,M as je}from"./bindings-DEHIalX3.js";const Q=Symbol("store-raw"),x=Symbol("store-node"),k=Symbol("store-has"),fe=Symbol("store-self");function he(e){let n=e[A];if(!n&&(Object.defineProperty(e,A,{value:n=new Proxy(e,xe)}),!Array.isArray(e))){const t=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let i=0,s=t.length;i<s;i++){const l=t[i];r[l].get&&Object.defineProperty(e,l,{enumerable:r[l].enumerable,get:r[l].get.bind(n)})}}return n}function L(e){let n;return e!=null&&typeof e=="object"&&(e[A]||!(n=Object.getPrototypeOf(e))||n===Object.prototype||Array.isArray(e))}function T(e,n=new Set){let t,r,i,s;if(t=e!=null&&e[Q])return t;if(!L(e)||n.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):n.add(e);for(let l=0,o=e.length;l<o;l++)i=e[l],(r=T(i,n))!==i&&(e[l]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):n.add(e);const l=Object.keys(e),o=Object.getOwnPropertyDescriptors(e);for(let u=0,c=l.length;u<c;u++)s=l[u],!o[s].get&&(i=e[s],(r=T(i,n))!==i&&(e[s]=r))}return e}function R(e,n){let t=e[n];return t||Object.defineProperty(e,n,{value:t=Object.create(null)}),t}function C(e,n,t){if(e[n])return e[n];const[r,i]=$e(t,{equals:!1,internal:!0});return r.$=i,e[n]=r}function Ee(e,n){const t=Reflect.getOwnPropertyDescriptor(e,n);return!t||t.get||!t.configurable||n===A||n===x||(delete t.value,delete t.writable,t.get=()=>e[A][n]),t}function de(e){X()&&C(R(e,x),fe)()}function Ae(e){return de(e),Reflect.ownKeys(e)}const xe={get(e,n,t){if(n===Q)return e;if(n===A)return t;if(n===oe)return de(e),t;const r=R(e,x),i=r[n];let s=i?i():e[n];if(n===x||n===k||n==="__proto__")return s;if(!i){const l=Object.getOwnPropertyDescriptor(e,n);X()&&(typeof s!="function"||e.hasOwnProperty(n))&&!(l&&l.get)&&(s=C(r,n,s)())}return L(s)?he(s):s},has(e,n){return n===Q||n===A||n===oe||n===x||n===k||n==="__proto__"?!0:(X()&&C(R(e,k),n)(),n in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Ae,getOwnPropertyDescriptor:Ee};function I(e,n,t,r=!1){if(!r&&e[n]===t)return;const i=e[n],s=e.length;t===void 0?(delete e[n],e[k]&&e[k][n]&&i!==void 0&&e[k][n].$()):(e[n]=t,e[k]&&e[k][n]&&i===void 0&&e[k][n].$());let l=R(e,x),o;if((o=C(l,n,i))&&o.$(()=>t),Array.isArray(e)&&e.length!==s){for(let u=e.length;u<s;u++)(o=l[u])&&o.$();(o=C(l,"length",s))&&o.$(e.length)}(o=l[fe])&&o.$()}function ye(e,n){const t=Object.keys(n);for(let r=0;r<t.length;r+=1){const i=t[r];I(e,i,n[i])}}function Ne(e,n){if(typeof n=="function"&&(n=n(e)),n=T(n),Array.isArray(n)){if(e===n)return;let t=0,r=n.length;for(;t<r;t++){const i=n[t];e[t]!==i&&I(e,t,i)}I(e,"length",r)}else ye(e,n)}function K(e,n,t=[]){let r,i=e;if(n.length>1){r=n.shift();const l=typeof r,o=Array.isArray(e);if(Array.isArray(r)){for(let u=0;u<r.length;u++)K(e,[r[u]].concat(n),t);return}else if(o&&l==="function"){for(let u=0;u<e.length;u++)r(e[u],u)&&K(e,[u].concat(n),t);return}else if(o&&l==="object"){const{from:u=0,to:c=e.length-1,by:h=1}=r;for(let O=u;O<=c;O+=h)K(e,[O].concat(n),t);return}else if(n.length>1){K(e[r],n,[r].concat(t));return}i=e[r],t=[r].concat(t)}let s=n[0];typeof s=="function"&&(s=s(i,t),s===i)||r===void 0&&s==null||(s=T(s),r===void 0||L(i)&&L(s)&&!Array.isArray(s)?ye(i,s):I(e,r,s))}function ae(...[e,n]){const t=T(e||{}),r=Array.isArray(t),i=he(t);function s(...l){we(()=>{r&&l.length===1?Ne(t,l[0]):K(t,l)})}return[i,s]}const g=Symbol.for("@ts-pattern/matcher"),ge=Symbol.for("@ts-pattern/isVariadic"),z="@ts-pattern/anonymous-select-key",Z=e=>!!(e&&typeof e=="object"),W=e=>e&&!!e[g],d=(e,n,t)=>{if(W(e)){const r=e[g](),{matched:i,selections:s}=r.match(n);return i&&s&&Object.keys(s).forEach(l=>t(l,s[l])),i}if(Z(e)){if(!Z(n))return!1;if(Array.isArray(e)){if(!Array.isArray(n))return!1;let r=[],i=[],s=[];for(const l of e.keys()){const o=e[l];W(o)&&o[ge]?s.push(o):s.length?i.push(o):r.push(o)}if(s.length){if(s.length>1)throw new Error("Pattern error: Using `...P.array(...)` several times in a single pattern is not allowed.");if(n.length<r.length+i.length)return!1;const l=n.slice(0,r.length),o=i.length===0?[]:n.slice(-i.length),u=n.slice(r.length,i.length===0?1/0:-i.length);return r.every((c,h)=>d(c,l[h],t))&&i.every((c,h)=>d(c,o[h],t))&&(s.length===0||d(s[0],u,t))}return e.length===n.length&&e.every((l,o)=>d(l,n[o],t))}return Object.keys(e).every(r=>{const i=e[r];return(r in n||W(s=i)&&s[g]().matcherType==="optional")&&d(i,n[r],t);var s})}return Object.is(n,e)},p=e=>{var n,t,r;return Z(e)?W(e)?(n=(t=(r=e[g]()).getSelectionKeys)==null?void 0:t.call(r))!=null?n:[]:Array.isArray(e)?F(e,p):F(Object.values(e),p):[]},F=(e,n)=>e.reduce((t,r)=>t.concat(n(r)),[]);function Ke(...e){if(e.length===1){const[n]=e;return t=>d(n,t,()=>{})}if(e.length===2){const[n,t]=e;return d(n,t,()=>{})}throw new Error(`isMatching wasn't given the right number of arguments: expected 1 or 2, received ${e.length}.`)}function y(e){return Object.assign(e,{optional:()=>re(e),and:n=>f(e,n),or:n=>me(e,n),select:n=>n===void 0?D(e):D(n,e)})}function ee(e){return Object.assign((n=>Object.assign(n,{[Symbol.iterator](){let t=0;const r=[{value:Object.assign(n,{[ge]:!0}),done:!1},{done:!0,value:void 0}];return{next:()=>{var i;return(i=r[t++])!=null?i:r.at(-1)}}}}))(e),{optional:()=>ee(re(e)),select:n=>ee(n===void 0?D(e):D(n,e))})}function re(e){return y({[g]:()=>({match:n=>{let t={};const r=(i,s)=>{t[i]=s};return n===void 0?(p(e).forEach(i=>r(i,void 0)),{matched:!0,selections:t}):{matched:d(e,n,r),selections:t}},getSelectionKeys:()=>p(e),matcherType:"optional"})})}const Te=(e,n)=>{for(const t of e)if(!n(t))return!1;return!0},Ce=(e,n)=>{for(const[t,r]of e.entries())if(!n(r,t))return!1;return!0};function f(...e){return y({[g]:()=>({match:n=>{let t={};const r=(i,s)=>{t[i]=s};return{matched:e.every(i=>d(i,n,r)),selections:t}},getSelectionKeys:()=>F(e,p),matcherType:"and"})})}function me(...e){return y({[g]:()=>({match:n=>{let t={};const r=(i,s)=>{t[i]=s};return F(e,p).forEach(i=>r(i,void 0)),{matched:e.some(i=>d(i,n,r)),selections:t}},getSelectionKeys:()=>F(e,p),matcherType:"or"})})}function a(e){return{[g]:()=>({match:n=>({matched:!!e(n)})})}}function D(...e){const n=typeof e[0]=="string"?e[0]:void 0,t=e.length===2?e[1]:typeof e[0]=="string"?void 0:e[0];return y({[g]:()=>({match:r=>{let i={[n??z]:r};return{matched:t===void 0||d(t,r,(s,l)=>{i[s]=l}),selections:i}},getSelectionKeys:()=>[n??z].concat(t===void 0?[]:p(t))})})}function v(e){return typeof e=="number"}function j(e){return typeof e=="string"}function S(e){return typeof e=="bigint"}const pe=y(a(function(e){return!0})),Fe=pe,E=e=>Object.assign(y(e),{startsWith:n=>{return E(f(e,(t=n,a(r=>j(r)&&r.startsWith(t)))));var t},endsWith:n=>{return E(f(e,(t=n,a(r=>j(r)&&r.endsWith(t)))));var t},minLength:n=>E(f(e,(t=>a(r=>j(r)&&r.length>=t))(n))),maxLength:n=>E(f(e,(t=>a(r=>j(r)&&r.length<=t))(n))),includes:n=>{return E(f(e,(t=n,a(r=>j(r)&&r.includes(t)))));var t},regex:n=>{return E(f(e,(t=n,a(r=>j(r)&&!!r.match(t)))));var t}}),De=E(a(j)),w=e=>Object.assign(y(e),{between:(n,t)=>w(f(e,((r,i)=>a(s=>v(s)&&r<=s&&i>=s))(n,t))),lt:n=>w(f(e,(t=>a(r=>v(r)&&r<t))(n))),gt:n=>w(f(e,(t=>a(r=>v(r)&&r>t))(n))),lte:n=>w(f(e,(t=>a(r=>v(r)&&r<=t))(n))),gte:n=>w(f(e,(t=>a(r=>v(r)&&r>=t))(n))),int:()=>w(f(e,a(n=>v(n)&&Number.isInteger(n)))),finite:()=>w(f(e,a(n=>v(n)&&Number.isFinite(n)))),positive:()=>w(f(e,a(n=>v(n)&&n>0))),negative:()=>w(f(e,a(n=>v(n)&&n<0)))}),Me=w(a(v)),P=e=>Object.assign(y(e),{between:(n,t)=>P(f(e,((r,i)=>a(s=>S(s)&&r<=s&&i>=s))(n,t))),lt:n=>P(f(e,(t=>a(r=>S(r)&&r<t))(n))),gt:n=>P(f(e,(t=>a(r=>S(r)&&r>t))(n))),lte:n=>P(f(e,(t=>a(r=>S(r)&&r<=t))(n))),gte:n=>P(f(e,(t=>a(r=>S(r)&&r>=t))(n))),positive:()=>P(f(e,a(n=>S(n)&&n>0))),negative:()=>P(f(e,a(n=>S(n)&&n<0)))}),We=P(a(S)),Be=y(a(function(e){return typeof e=="boolean"})),Le=y(a(function(e){return typeof e=="symbol"})),Re=y(a(function(e){return e==null})),Ie=y(a(function(e){return e!=null}));var ze={__proto__:null,matcher:g,optional:re,array:function(...e){return ee({[g]:()=>({match:n=>{if(!Array.isArray(n))return{matched:!1};if(e.length===0)return{matched:!0};const t=e[0];let r={};if(n.length===0)return p(t).forEach(s=>{r[s]=[]}),{matched:!0,selections:r};const i=(s,l)=>{r[s]=(r[s]||[]).concat([l])};return{matched:n.every(s=>d(t,s,i)),selections:r}},getSelectionKeys:()=>e.length===0?[]:p(e[0])})})},set:function(...e){return y({[g]:()=>({match:n=>{if(!(n instanceof Set))return{matched:!1};let t={};if(n.size===0)return{matched:!0,selections:t};if(e.length===0)return{matched:!0};const r=(s,l)=>{t[s]=(t[s]||[]).concat([l])},i=e[0];return{matched:Te(n,s=>d(i,s,r)),selections:t}},getSelectionKeys:()=>e.length===0?[]:p(e[0])})})},map:function(...e){return y({[g]:()=>({match:n=>{if(!(n instanceof Map))return{matched:!1};let t={};if(n.size===0)return{matched:!0,selections:t};const r=(o,u)=>{t[o]=(t[o]||[]).concat([u])};if(e.length===0)return{matched:!0};var i;if(e.length===1)throw new Error(`\`P.map\` wasn't given enough arguments. Expected (key, value), received ${(i=e[0])==null?void 0:i.toString()}`);const[s,l]=e;return{matched:Ce(n,(o,u)=>{const c=d(s,u,r),h=d(l,o,r);return c&&h}),selections:t}},getSelectionKeys:()=>e.length===0?[]:[...p(e[0]),...p(e[1])]})})},intersection:f,union:me,not:function(e){return y({[g]:()=>({match:n=>({matched:!d(e,n,()=>{})}),getSelectionKeys:()=>[],matcherType:"not"})})},when:a,select:D,any:pe,_:Fe,string:De,number:Me,bigint:We,boolean:Be,symbol:Le,nullish:Re,nonNullable:Ie,instanceOf:function(e){return y(a(function(n){return t=>t instanceof n}(e)))},shape:function(e){return y(a(Ke(e)))}};const ne={matched:!1,value:void 0};function qe(e){return new q(e,ne)}class q{constructor(n,t){this.input=void 0,this.state=void 0,this.input=n,this.state=t}with(...n){if(this.state.matched)return this;const t=n[n.length-1],r=[n[0]];let i;n.length===3&&typeof n[1]=="function"?i=n[1]:n.length>2&&r.push(...n.slice(1,n.length-1));let s=!1,l={};const o=(c,h)=>{s=!0,l[c]=h},u=!r.some(c=>d(c,this.input,o))||i&&!i(this.input)?ne:{matched:!0,value:t(s?z in l?l[z]:l:this.input,this.input)};return new q(this.input,u)}when(n,t){if(this.state.matched)return this;const r=!!n(this.input);return new q(this.input,r?{matched:!0,value:t(this.input,this.input)}:ne)}otherwise(n){return this.state.matched?this.state.value:n(this.input)}exhaustive(){if(this.state.matched)return this.state.value;let n;try{n=JSON.stringify(this.input)}catch{n=this.input}throw new Error(`Pattern matching error: no pattern matches value ${n}`)}run(){return this.exhaustive()}returnType(){return this}}var $;function Ye(e){return{lang:(e==null?void 0:e.lang)??($==null?void 0:$.lang),message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??($==null?void 0:$.abortEarly),abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??($==null?void 0:$.abortPipeEarly),skipPipe:e==null?void 0:e.skipPipe}}var U;function Ge(e){return U==null?void 0:U.get(e)}var H;function Ue(e){return H==null?void 0:H.get(e)}var J;function He(e,n){var t;return(t=J==null?void 0:J.get(e))==null?void 0:t.get(n)}function Je(e){let n=typeof e;return n==="object"&&(n=e?Object.getPrototypeOf(e).constructor.name:"null"),n==="string"?`"${e}"`:n==="number"||n==="bigint"||n==="boolean"?`${e}`:n}function Y(e,n,t,r,i){const s=i&&"input"in i?i.input:t.value,l=(i==null?void 0:i.expected)??e.expects,o=(i==null?void 0:i.received)??Je(s),u={kind:e.kind,type:e.type,input:s,expected:l,received:o,message:`Invalid ${n}: ${l?`Expected ${l} but r`:"R"}eceived ${o}`,requirement:e.requirement,path:i==null?void 0:i.path,issues:i==null?void 0:i.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly,skipPipe:r.skipPipe},c=e.kind==="schema",h=e.message??He(e.reference,u.lang)??(c?Ue(u.lang):null)??r.message??Ge(u.lang);h&&(u.message=typeof h=="function"?h(u):h),c&&(t.typed=!1),t.issues?t.issues.push(u):t.issues=[u]}function be(e,n){return{kind:"validation",type:"max_length",reference:be,async:!1,expects:`<=${e}`,requirement:e,message:n,_run(t,r){return t.typed&&t.value.length>this.requirement&&Y(this,"length",t,r,{received:`${t.value.length}`}),t}}}function te(e){return{kind:"validation",type:"non_empty",reference:te,async:!1,expects:"!0",message:e,_run(n,t){return n.typed&&n.value.length===0&&Y(this,"length",n,t,{received:"0"}),n}}}function ve(e,n){return{kind:"schema",type:"object",reference:ve,expects:"Object",async:!1,entries:e,message:n,_run(t,r){var s;const i=t.value;if(i&&typeof i=="object"&&i.constructor===Object){t.typed=!0,t.value={};for(const l in this.entries){const o=i[l],u=this.entries[l]._run({typed:!1,value:o},r);if(u.issues){const c={type:"object",origin:"value",input:i,key:l,value:o};for(const h of u.issues)h.path?h.path.unshift(c):h.path=[c],(s=t.issues)==null||s.push(h);if(t.issues||(t.issues=u.issues),r.abortEarly){t.typed=!1;break}}u.typed||(t.typed=!1),(u.value!==void 0||l in i)&&(t.value[l]=u.value)}}else Y(this,"type",t,r);return t}}}function B(e){return{kind:"schema",type:"string",reference:B,expects:"string",async:!1,message:e,_run(n,t){return typeof n.value=="string"?n.typed=!0:Y(this,"type",n,t),n}}}function ce(...e){return{...e[0],pipe:e,_run(n,t){for(let r=0;r<e.length;r++){n=e[r]._run(n,t);const i=e[r+1];if(t.skipPipe||n.issues&&(t.abortEarly||t.abortPipeEarly||(i==null?void 0:i.kind)==="schema"||(i==null?void 0:i.kind)==="transformation")){n.typed=!1;break}}return n}}}function Ve(e,n,t){const r=e._run({typed:!1,value:n},Ye(t));return{typed:r.typed,success:!r.issues,output:r.value,issues:r.issues}}var Xe=N('<div class=w-full><textarea name=content class="w-full min-h-32"placeholder="Your note here. You can change this later...">'),Qe=N("<button>Create"),Ze=N('<div class="m-auto min-w-[460px] w-[575px] max-w-full h-full flex flex-col justify-start items-center p-4 gap-6"><h1>New note'),en=N("<div>Error: "),nn=N('<div class="border-b pb-3 border-neutral-500/30"><div class="w-full flex justify-between items-center align-middle gap-9"><label><b></b><p class="text-sm text-neutral-500 italic pt-2"></p></label><input type=text autocomplete=off>'),tn=N('<div class="px-2 py-[2px] bg-red-700/80 rounded-md w-full mt-2">');const rn=ve({name:ce(B(),te("Please give your note a name."),be(300,"Note names must be less than 300 characters")),color:ce(B(),te("Please style your note with a color.")),content:B()});function on(){const[e,n]=ae({}),[t,r]=ae({});return b(je,{get children(){var s=Ze();return s.firstChild,_(s,b(ke,{fallback:(l,o)=>(()=>{var u=en();return u.firstChild,Oe(u,"click",o,!0),_(u,()=>l.toString(),null),u})(),get children(){return[b(G,{get when(){return t.general},children:l=>b(V,{get message(){return l()}})}),b(i,{key:"name",description:"This will be the name that is displayed in menus and windows",placeholder:"My Note",get error(){return t.name}}),b(i,{key:"color",description:"Pick a base colour theme your sticky note around",placeholder:"#FFFFFF"}),(()=>{var l=Xe(),o=l.firstChild;return o.$$input=u=>n("content",u.currentTarget.value),_(l,b(G,{get when(){return t.content},children:u=>b(V,{get message(){return u()}})}),null),l})(),(()=>{var l=Qe();return l.$$click=()=>{r({});const o=Ve(rn,e);if(!o.success){console.debug("Invalidated note draft",o.issues),o.issues.forEach(u=>{var c;qe((c=u.path)==null?void 0:c[0]).with({key:ze.union("name","color","content")},h=>r(h.key,u.message)).otherwise(()=>{t.general||r("general",u.message)})});return}_e.createNoteWindow(o.output)},l})()]}}),null),s}});function i(s){return(()=>{var l=nn(),o=l.firstChild,u=o.firstChild,c=u.firstChild,h=c.nextSibling,O=u.nextSibling;return _(c,()=>sn(s.key)),_(h,()=>s.description),O.$$input=m=>n(s.key,m.currentTarget.value),_(l,b(G,{get when(){return t[s.key]},children:m=>b(V,{get message(){return m()}})}),null),Se(m=>{var ie=`field-${s.key}`,se=`field-${s.key}`,le=s.key,ue=s.placeholder;return ie!==m.e&&M(u,"for",m.e=ie),se!==m.t&&M(O,"id",m.t=se),le!==m.a&&M(O,"name",m.a=le),ue!==m.o&&M(O,"placeholder",m.o=ue),m},{e:void 0,t:void 0,a:void 0,o:void 0}),l})()}}function sn(e){return e.charAt(0).toUpperCase()+e.slice(1)}function V(e){return(()=>{var n=tn();return _(n,()=>e.message),n})()}Pe(["input","click"]);export{on as default};
